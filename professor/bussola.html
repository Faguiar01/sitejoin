<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bússola Estratégica - Join Xperience</title>
    
    <!-- CSS separado em arquivo externo para melhor performance -->
    <link rel="stylesheet" href="../css/professor-styles.css">
    <link rel="stylesheet" href="../css/accordion.css">
    
    <!-- Pré-conexão para melhor performance -->
    <link rel="preconnect" href="https://www.gstatic.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
</head>
<body class="flex-body">
    <header class="main-header">
        <a href="../index.html" class="logo-container">
            <img src="../JOIN.png" alt="Logo Join Xperience" loading="lazy">
            <span>Join Xperience</span>
        </a>
        <nav>
            <button id="logout-button" class="btn-logout">Sair</button>
        </nav>
    </header>

    <main class="container">
        <div class="page-header">
            <h1>Bússola Estratégica</h1>
            <div>
                <a href="professor.html" class="btn btn-primary">Voltar ao Painel</a>
            </div>
        </div>

        <div class="content-box">
            <h2>Guia de Termos Financeiros Essenciais</h2>
            <p>Use este glossário como bússola para tomar decisões mais conscientes dentro do simulador.</p>

            <div class="accordion-container">
                <!-- Os itens do acordeão permanecem os mesmos -->
                <!-- ... -->
            </div>
        </div>
    </main>

    <footer class="main-footer">
        <p>© <span id="current-year">2025</span> JOIN XPERIENCE - Todos os direitos reservados</p>
    </footer>

    <!-- Firebase e scripts no final do body para melhor performance -->
    <script type="module">
        // Importações otimizadas
        import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";
        import { auth } from '../js/firebase-init.js';
        
        // Verificação de autenticação e tipo de usuário
        onAuthStateChanged(auth, (user) => {
            if (!user || !user.email.endsWith('@escola.com')) {
                window.location.href = '../sitejoin/login.html';
            } else {
                document.body.style.display = 'flex';
            }
        });

        // Logout melhorado com tratamento de erros
        document.getElementById('logout-button').addEventListener('click', async (e) => {
            e.preventDefault();
            try {
                await signOut(auth);
                window.location.href = '../index.html';
            } catch (error) {
                console.error('Erro ao fazer logout:', error);
                alert('Ocorreu um erro ao tentar sair. Por favor, tente novamente.');
            }
        });

        // Lógica do Acordeão modernizada
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', () => {
                const content = document.getElementById(header.dataset.target);
                const icon = header.querySelector('.accordion-icon');
                
                // Fecha todos os outros itens primeiro
                document.querySelectorAll('.accordion-content.active').forEach(item => {
                    if (item !== content) {
                        item.classList.remove('active');
                        item.previousElementSibling.querySelector('.accordion-icon').classList.remove('rotate');
                    }
                });
                
                // Alterna o item atual
                content.classList.toggle('active');
                icon.classList.toggle('rotate');
            });
        });

        // Atualiza o ano do footer dinamicamente
        document.getElementById('current-year').textContent = new Date().getFullYear();
    </script>
</body>
</html>